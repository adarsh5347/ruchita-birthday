<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Happy Birthday Ruchitaaa üéâüíô</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts for Poppins and Gochi Hand (for birthday title) -->
    <link href="https://fonts.googleapis.com/css2?family=Gochi+Hand&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- ORIGINAL VIBRANT BLUE COLOR PALETTE --- */
        :root {
            --color-primary: #1e90ff; /* Dodger Blue */
            --color-secondary: #4da6ff; /* Lighter Blue */
            --color-background: #e0f2ff; /* Very Light Blue */
            --color-text: #1e2a40; /* Dark Navy Text */
            --color-gold: #FFD700; /* Gold for Note */
            --color-gold-bg: #fff8e1; /* Pale Gold BG */
            --color-motivation: #d9ead3; /* Light Greenish-White for Motivation */
            --color-peg-wood: #8B4513; /* Saddle Brown for Pegs */
            --color-base-wood: #A0522D; /* Sienna for Base */
        }
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            color: var(--color-text);
            /* Complex background for appeal */
            background: linear-gradient(135deg, var(--color-background), #c2e0ff);
            background-attachment: fixed;
        }

        /* Header Styling */
        header {
            text-align: center;
            padding: 3.5rem 1rem;
            background: linear-gradient(135deg, var(--color-secondary), var(--color-primary));
            color: white;
            position: relative;
            overflow: hidden;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            animation: pulse-border 2s infinite alternate;
        }
        @keyframes pulse-border {
            from { border-color: rgba(255, 255, 255, 0.5); }
            to { border-color: rgba(255, 255, 255, 1); }
        }
        header h1 {
            font-family: 'Gochi Hand', cursive;
            font-size: clamp(2.5rem, 8vw, 4rem); /* Responsive font size */
            margin: 0;
            font-weight: 700;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); /* Subtle glow */
        }
        header p {
            font-size: clamp(1rem, 3vw, 1.2rem);
            margin-top: 0.5rem;
            opacity: 0.9;
        }

        /* Confetti (Rice Grains) */
        .confetti {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
        }
        .grain {
            position: absolute;
            width: 8px; height: 16px;
            background: #b3e0ff;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
            animation: fall 6s linear infinite;
        }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg) scale(1); opacity: 0.8; }
            100% { transform: translateY(100vh) rotate(360deg) scale(0.5); opacity: 0; }
        }

        /* Section Styling */
        section {
            max-width: 900px;
            margin: 2rem auto;
            padding: 2.5rem;
            background: #ffffff;
            border-radius: 25px; /* Softer rounded corners */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); /* Deeper shadow */
            transition: transform 0.3s ease;
        }
        section:hover {
            transform: translateY(-4px);
        }
        section h2 {
            text-align: center;
            color: var(--color-primary);
            margin-bottom: 1.5rem;
            font-weight: 700;
            font-size: 1.8rem;
        }

        /* Responsive adjustments for mobile */
        @media (max-width: 450px) {
            section {
                margin: 1rem auto;
                padding: 1.5rem 1rem;
                border-radius: 15px;
            }
        }

        /* ------------------ Memory Wall (Gallery) ------------------ */
        #preview {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 1rem;
        }
        .media-item {
            width: 100%;
            max-width: 200px; 
            height: 140px; 
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
            cursor: pointer;
            transition: transform 0.3s, opacity 0.3s;
            border: 2px solid var(--color-secondary); 
        }
        .media-item img, .media-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        @media (max-width: 600px) {
            .media-item {
                max-width: 45%; 
                height: 120px;
            }
        }
        .media-item:hover {
            transform: scale(1.05);
            opacity: 0.9;
        }
        
        /* ------------------ Video Embeds Section ------------------ */
        #videoEmbedsContainer {
            display: flex;
            flex-direction: column;
            gap: 30px;
            align-items: center;
            margin-top: 20px;
        }
        .video-wrapper {
            width: 100%;
            max-width: 600px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            aspect-ratio: 16 / 9; 
        }
        .video-wrapper iframe {
             width: 100%;
             height: 100%;
        }

        /* ------------------ Thank You Note Section ------------------ */
        .thank-you-note {
            background: var(--color-gold-bg);
            border: 3px solid var(--color-gold);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 6px 15px rgba(255, 215, 0, 0.2);
            text-align: center;
        }
        .thank-you-note h3 {
            color: var(--color-primary); 
            font-size: 1.5rem;
            margin-bottom: 1rem;
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
        }
        .thank-you-note .sender {
            display: block;
            margin-top: 1.5rem;
            font-weight: 600;
            color: var(--color-text);
            font-style: italic;
        }
        .favourite-terms-list {
            text-align: left;
            padding: 0 1.5rem;
            list-style: none;
            line-height: 1.8;
            font-size: 1.1rem;
            color: var(--color-text);
        }
        
        /* ------------------ Tower of Hanoi Game (4 Pegs) ------------------ */
        #hanoi-game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            background: #f8f8f8;
            border-radius: 10px;
        }
        .pegs-container {
            display: flex;
            justify-content: space-between; /* Adjusted for 4 pegs */
            width: 95%; /* Wider to fit 4 pegs */
            max-width: 650px;
            height: 200px;
            margin-bottom: 10px;
            align-items: flex-end;
            position: relative;
            padding: 0 10px;
            border-bottom: 15px solid var(--color-base-wood); /* Shared wooden base */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .peg {
            width: 15px; /* Increased width from 8px to 15px */
            height: 100%;
            background-color: var(--color-peg-wood); 
            position: relative;
            cursor: pointer;
            margin: 0 1%; /* Closer spacing */
            border-radius: 5px 5px 0 0;
            display: flex;
            flex-direction: column-reverse;
            align-items: center;
            transition: background-color 0.2s;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.4); /* Inner shadow for 3D effect */
        }
        .peg.target-ready {
            background-color: #6aa84f; /* Green highlight for valid placement */
        }
        .peg.target-ready:hover {
            background-color: #5b8f3b;
        }
        .disk {
            position: absolute;
            height: 24px; /* Slightly taller disks */
            background: var(--color-primary);
            border: 1px solid #1e2a40;
            border-radius: 4px; /* Square/pill-like disks */
            cursor: pointer;
            bottom: 0px; 
            transition: transform 0.3s ease, background-color 0.2s, width 0.3s;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.4); /* Stronger disk shadow */
        }
        .disk.selected {
            background-color: #e74c3c; /* Red when selected */
            transform: translateY(-28px); /* Lift the disk up */
            z-index: 10;
        }
        /* Disk sizing relative to max width (for 4 disks) - VIBRANT BLUE THEME COLORS */
        .disk[data-size="1"] { 
            width: 35%; 
            background: linear-gradient(to top, #77d4f9, #a8e5ff); /* Light Blue Gradient */
        }
        .disk[data-size="2"] { 
            width: 55%; 
            background: linear-gradient(to top, #00bfff, #5bd8ff); /* Deep Sky Blue Gradient */
        } 
        .disk[data-size="3"] { 
            width: 75%; 
            background: linear-gradient(to top, #1e90ff, #5aaaff); /* Dodger Blue Gradient */
        } 
        .disk[data-size="4"] { 
            width: 95%; /* Made largest disk slightly wider */
            background: linear-gradient(to top, #005A9C, #0088e0); /* Darker Navy Blue Gradient */
        } 

        .controls { text-align: center; margin-top: 1rem; }
        #resetHanoiBtn { 
            padding: 10px 20px; background: var(--color-primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); transition: background 0.3s, transform 0.1s; 
        }
        #resetHanoiBtn:hover { background: var(--color-secondary); transform: translateY(-1px); }
        #hanoiMessage, #hanoiMoves { font-weight: 600; color: var(--color-text); margin-top: 0.5rem; }
        .hanoi-win { background-color: #ccffcc; animation: successFlash 1s ease-out; }
        
        /* Solution Modal Styling */
        #showSolutionBtn {
            padding: 10px 20px; 
            background: #FFD700; /* Gold Button */
            color: var(--color-text); 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: bold; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); 
            transition: background 0.3s, transform 0.1s;
            margin-left: 10px;
        }
        #showSolutionBtn:hover {
            background: #e7c300;
            transform: translateY(-1px);
        }

        /* ------------------ Daily Motivation Section ------------------ */
        .daily-quote-section {
            background: var(--color-motivation);
            border: 3px solid #6aa84f; /* Green Accent */
            padding: 3rem 2.5rem;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            text-align: center;
        }
        .daily-quote-section h2 {
            color: #6aa84f;
        }
        .motivation-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 1.5rem;
        }
        #shuffleQuoteBtn, #viewAllQuotesBtn {
            padding: 10px 20px; 
            background: #6aa84f; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: bold; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); 
            transition: background 0.3s, transform 0.1s;
        }
        #shuffleQuoteBtn:hover, #viewAllQuotesBtn:hover {
             background: #5b8f3b;
             transform: translateY(-1px);
        }

        /* ------------------ Modal (General) ------------------ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            overflow: auto;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            margin: auto;
            display: block;
            max-width: 90%;
            max-height: 90%;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            object-fit: contain;
        }
        .quotes-modal-content {
            background: white;
            padding: 30px;
            max-width: 90%;
            border-radius: 15px;
        }
        .quotes-list {
            max-height: 60vh;
            overflow-y: auto;
            padding: 0 10px;
        }
        .quotes-list li {
            padding: 10px 0;
            border-bottom: 1px dashed #eee;
            font-size: 1.05rem;
            text-align: left;
        }
        .quotes-list li:last-child {
            border-bottom: none;
        }
        .quotes-list .author {
            display: block;
            font-style: italic;
            font-size: 0.9rem;
            color: #6aa84f;
            margin-top: 5px;
        }
        .close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
        }
        .close:hover, .close:focus {
            color: #bbb;
            text-decoration: none;
        }
        /* Table styling for solution modal */
        #solutionTable th, #solutionTable td {
            padding: 8px; 
            border: 1px solid #ddd;
        }
        #solutionTable tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <header>
        <h1>üéâ Happy Birthday Ruchita üíôüçö</h1>
        <p>Wishing you endless joy, laughter, and rice bowls forever üåæüçö‚ú®</p>
        <div class="confetti"></div>
    </header>

    <section id="memory-wall-section">
        <h2>üì∏ ‡§Æ‡•á‡§Æ‡§∞‡•Ä ‡§µ‡•â‡§≤ (Memory Wall)</h2>
        <p style="text-align: center; font-style: italic; color: #555;">(Tap on any media to view full screen! Now with 8 photo spots!)</p>
        <div id="preview">
            <!-- Media will be loaded here by JavaScript -->
        </div>
    </section>

    <!-- Dedicated Google Drive Video Embeds -->
    <section id="video-memories-section">
        <h2>üéûÔ∏èVideo Memories</h2>
        <p style="text-align: center; color: var(--color-text); margin-bottom: 20px;">
            Here are our special video clips.
            <br>
            <span style="font-weight: 600; font-size: 0.9rem; color: #e74c3c;">
                
            </span>
        </p>
        <div id="videoEmbedsContainer">
            <!-- Videos will be loaded here by JavaScript -->
        </div>
    </section>

    <section id="thank-you-section">
        <h2>üíå ‡§ú‡§æ‡§∏‡•ç‡§§ ‡§ö‡•Å‡§∞‡•Å ‡§ö‡•Å‡§∞‡•Å ‡§®‡§æ‡§π‡•Ä ‡§¨‡•ã‡§≤‡§æ‡§Ø‡§ö‡§Ç </h2>
        <div class="thank-you-note">
            
            <h3 style="color: var(--color-primary); font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 1.5rem; margin-bottom: 1rem;">‡§Ü‡§µ‡§°‡§§‡•ç‡§Ø‡§æ ‡§∏‡§Ç‡§ú‡•ç‡§û‡§æ (Favourite Terms)</h3>

            <ul class="favourite-terms-list">
                <li>‚Äî **‡§Æ‡§Ç‡§¶‡§¨‡§¶‡§ï** (Mandbadak)</li>
                <li>‚Äî **‡§™‡§æ‡§ó‡§≤ ‡§™‡•ã‡§∞‡§ó‡§æ** (Pagal Porga)</li>
                <li>‚Äî **‡§µ‡§ü‡§µ‡§æ‡§ò‡•Ç‡§≥** (Vatvaaghool)</li>
                <li>‚Äî **‡§ò‡•Å‡§¨‡§°** (Ghubad)</li>
                <li>‚Äî ‚Äî **‡§§‡•Å‡§∑‡§æ‡§∞ ‡§∏‡§∞rrrrrrrr** (Tushar Sirrrrrrrrr)</li>
            </ul>
            
            <span class="sender">‚Äî ‡§∏‡§¶‡•à‡§µ ‡§Ü‡§¶‡§∞‡•ç‡§∂</span>
        </div>
    </section>
    
    <!-- NEW BRAIN GAME: Tower of Hanoi (Updated to 4 Pegs / 4 Disks) -->
    <section id="hanoi-section">
        <h2>üß† ‡§ü‡•â‡§µ‡§∞ ‡§ë‡§´ ‡§π‡§®‡•ã‡§à (Tower of Hanoi)</h2>
        <p style="text-align: center; font-style: italic; color: #555; margin-bottom: 1rem;">(Move 4 disks from Peg A to Peg D in the fewest moves)</p>
        <div id="hanoi-game-container">
            <div class="pegs-container">
                <div id="peg-A" class="peg" data-peg="A"></div>
                <div id="peg-B" class="peg" data-peg="B"></div>
                <div id="peg-C" class="peg" data-peg="C"></div>
                <div id="peg-D" class="peg" data-peg="D"></div>
            </div>
            <div class="controls">
                <p id="hanoiMessage" style="color: var(--color-text);">Click the peg you want to take a disk from.</p>
                <p id="hanoiMoves">Moves: 0</p>
                <button id="resetHanoiBtn">Reset Game</button>
                <button id="showSolutionBtn">View Best Moves (9 Moves)</button>
            </div>
        </div>
    </section>
    
    <!-- Daily Motivational Quote Section -->
    <section class="daily-quote-section">
        <h2>üí° Daily Dose of Inspiration</h2>
        <div id="dailyQuoteDisplay" style="text-align: center;">
            <p id="motivationalQuote" style="font-size: clamp(1.2rem, 5vw, 1.5rem); font-weight: 600; color: #38761d; line-height: 1.6; margin-bottom: 0.5rem;"></p>
            <span id="quoteAuthor" style="display: block; font-style: italic; color: #6aa84f;"></span>
        </div>
        <div class="motivation-controls">
            <button id="shuffleQuoteBtn">‚ú® Shuffle Quote ‚ú®</button>
            <button id="viewAllQuotesBtn">View All 12 Quotes</button>
        </div>
    </section>

    <!-- The Modal (for full screen media viewing) -->
    <div id="mediaModal" class="modal" onclick="closeMediaModal()">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImage">
        <video class="modal-content" id="modalVideo" controls></video>
    </div>

    <!-- New Modal for All Quotes -->
    <div id="allQuotesModal" class="modal" onclick="closeAllQuotesModal()">
        <div class="quotes-modal-content" onclick="event.stopPropagation()">
            <span class="close" onclick="closeAllQuotesModal()">&times;</span>
            <h3 style="text-align: center; color: var(--color-primary); margin-top: 0;">‚ú® All 12 Inspirational Quotes ‚ú®</h3>
            <ul id="quotesList" class="quotes-list" style="padding: 0; margin: 0;"></ul>
        </div>
    </div>
    
    <!-- New Modal for Hanoi Solution -->
    <div id="hanoiSolutionModal" class="modal" onclick="closeHanoiSolutionModal()">
        <div class="quotes-modal-content" onclick="event.stopPropagation()">
            <span class="close" onclick="closeHanoiSolutionModal()">&times;</span>
            <h3 style="text-align: center; color: var(--color-primary); margin-top: 0;">Optimal Solution (9 Moves)</h3>
            <p style="text-align: center;">The fastest way to move 4 disks from Peg A to Peg D:</p>
            <table id="solutionTable" style="width: 100%; text-align: center; border-collapse: collapse; margin-top: 15px;">
                <thead>
                    <tr style="background-color: #f0f8ff;">
                        <th style="padding: 8px; border: 1px solid #ddd;">Step</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">Disk</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">From</th>
                        <th style="padding: 8px; border: 1px solid #ddd;">To</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Solution steps will be generated here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // --- 1. Confetti Animation Setup ---
        function createGrain() {
            const grain = document.createElement('div');
            grain.className = 'grain';
            grain.style.left = Math.random() * 100 + 'vw';
            grain.style.animationDuration = (3 + Math.random() * 4) + 's';
            document.querySelector('.confetti').appendChild(grain);
            setTimeout(() => grain.remove(), 7000);
        }
        setInterval(createGrain, 200);

        // --- 2. Memory Wall & Modal Setup (Updated for 8 photos) ---
        const mediaUrls = [
            { url: "./assets/RUCHITA_IMAGE_1.jpg", type: "image" },
            { url: "./assets/RUCHITA_IMAGE_2.jpg", type: "image" },
            { url: "./assets/RUCHITA_IMAGE_3.jpg", type: "image" },
            { url: "./assets/RUCHITA_IMAGE_4.jpg", type: "image" },
            { url: "./assets/RUCHITA_IMAGE_5.jpg", type: "image" }, 
            { url: "./assets/RUCHITA_IMAGE_6.jpg", type: "image" }, 
            { url: "./assets/RUCHITA_IMAGE_7.jpg", type: "image" }, // Spot 7
            { url: "./assets/RUCHITA_IMAGE_8.jpg", type: "image" }, // Spot 8
        ];

        const previewContainer = document.getElementById('preview');
        const mediaModal = document.getElementById('mediaModal');
        const modalImage = document.getElementById('modalImage');
        const modalVideo = document.getElementById('modalVideo');

        function setupMemoryWall() {
            mediaUrls.forEach(media => {
                let element;
                const wrapper = document.createElement('div');
                wrapper.className = 'media-item';

                if (media.type === 'image') {
                    element = document.createElement('img');
                    element.src = media.url;
                    element.alt = 'Birthday Memory Image';
                } else if (media.type === 'video') {
                    element = document.createElement('video');
                    element.src = media.url;
                    element.controls = false;
                    element.muted = true; 
                    element.loop = true;
                    element.setAttribute('playsinline', ''); 
                    element.addEventListener('mouseenter', () => element.play());
                    element.addEventListener('mouseleave', () => element.pause());
                }

                if (element) {
                    wrapper.appendChild(element); 
                    wrapper.addEventListener('click', () => openMediaModal(media.url, media.type));
                    previewContainer.appendChild(wrapper);
                }
            });
        }

        function openMediaModal(url, type) {
            mediaModal.style.display = "flex";
            if (type === 'image') {
                modalImage.src = url;
                modalImage.style.display = 'block';
                modalVideo.style.display = 'none';
            } else if (type === 'video') {
                modalVideo.src = url;
                modalVideo.style.display = 'block';
                modalImage.style.display = 'none';
                modalVideo.play();
                modalVideo.controls = true;
                modalVideo.muted = false; 
            }
        }

        function closeMediaModal() {
            mediaModal.style.display = 'none';
            modalVideo.pause();
            modalVideo.currentTime = 0;
            modalVideo.muted = true;
        }

        document.getElementById('mediaModal').querySelector('.close').addEventListener('click', closeMediaModal);


        // --- 3. Google Drive Video Setup ---
        const driveVideoIds = [
            "1G7VcF6Tpow7YDj6aWl5QwYXX7XAmG-QC", 
            "1WbtDdChJbIwLrvc_4YpXz3IUyTool0kt", 
            "1gRbI7djlHEPO4cdKj5_D6JTBdqVEgfLq",
        ];

        const videoEmbedsContainer = document.getElementById('videoEmbedsContainer');

        function setupDriveVideos() {
            const hasPlaceholders = driveVideoIds.some(id => id.includes("YOUR_VIDEO_FILE_ID"));

            if (driveVideoIds.length === 0 || hasPlaceholders) {
                 videoEmbedsContainer.innerHTML = `<p style="color: var(--color-text); text-align: center; font-style: italic;">
                    Please paste your <span style="font-weight: bold; color: #e74c3c;">Google Drive File IDs</span> into the 'driveVideoIds' list in the JavaScript to load your videos here.
                    <br>
                    <span style="font-size: 0.9em;">(Remember to set sharing permissions to 'Anyone with the link can view'.)</span>
                </p>`;
                return;
            }

            driveVideoIds.forEach(id => {
                const embedUrl = `https://drive.google.com/file/d/${id}/preview`;

                const videoWrapper = document.createElement('div');
                videoWrapper.className = 'video-wrapper';

                const iframe = document.createElement('iframe');
                iframe.src = embedUrl;
                iframe.width = "100%";
                iframe.height = "100%"; 
                iframe.style.border = "none";
                iframe.allow = "autoplay";
                iframe.setAttribute('allowfullscreen', '');
                iframe.title = "Shared Video Memory";

                videoWrapper.appendChild(iframe);
                videoEmbedsContainer.appendChild(videoWrapper);
            });
        }

        // --- 4. Tower of Hanoi Logic (4 Pegs / 4 Disks) ---
        const hanoi = {
            pegs: { A: [4, 3, 2, 1], B: [], C: [], D: [] }, // 4 Disks (4=largest, 1=smallest) and 4 Pegs
            moves: 0,
            selectedDisk: null, 
            sourcePeg: null,
            diskElements: {}, // Map disk size to its DOM element
        };

        // Optimal move sequence for 4 disks, 4 pegs (Reve's Puzzle)
        const optimalMoves = [
            { disk: 1, from: 'A', to: 'C' },
            { disk: 2, from: 'A', to: 'B' },
            { disk: 1, from: 'C', to: 'B' },
            { disk: 3, from: 'A', to: 'D' },
            { disk: 4, from: 'A', to: 'C' },
            { disk: 3, from: 'D', to: 'C' },
            { disk: 1, from: 'B', to: 'A' },
            { disk: 2, from: 'B', to: 'D' },
            { disk: 1, from: 'A', to: 'D' }
        ];

        const pegElements = {
            A: document.getElementById('peg-A'),
            B: document.getElementById('peg-B'),
            C: document.getElementById('peg-C'),
            D: document.getElementById('peg-D'), // New Peg D element
        };
        const hanoiMessage = document.getElementById('hanoiMessage');
        const hanoiMoves = document.getElementById('hanoiMoves');
        const pegsContainer = document.querySelector('.pegs-container');
        const numDisks = 4;
        const targetPegId = 'D';

        function updateHanoiUI() {
            // Remove all existing disks
            document.querySelectorAll('.disk').forEach(disk => disk.remove());

            // Redraw disks based on hanoi.pegs state
            Object.keys(hanoi.pegs).forEach(pegId => {
                const peg = pegElements[pegId];
                hanoi.pegs[pegId].forEach((diskSize, index) => {
                    let diskElement = hanoi.diskElements[diskSize];
                    
                    // Reposition disk (disk height is 20px in CSS + 4px extra spacing = 24px)
                    diskElement.style.bottom = `${index * 24}px`;
                    
                    // Attach disk to its parent peg
                    peg.appendChild(diskElement);
                });
            });

            // Update move counter. (Removed Best Move as 4-peg min moves is complex)
            hanoiMoves.textContent = `Moves: ${hanoi.moves}`;

            // Check for win condition (all 4 disks on target peg D)
            if (hanoi.pegs[targetPegId].length === numDisks) {
                hanoiMessage.textContent = 'üéâ You Win! Solved in ' + hanoi.moves + ' moves!';
                hanoiMessage.style.color = '#38761d';
                document.getElementById('hanoi-section').classList.add('hanoi-win');
                pegsContainer.removeEventListener('click', hanoiClickHandler);
            }
        }

        function isValidMove(diskSize, targetPegId) {
            const targetPeg = hanoi.pegs[targetPegId];
            const topDisk = targetPeg[targetPeg.length - 1];
            
            // Check if target peg is empty or if the top disk is larger than the disk being moved
            return targetPeg.length === 0 || diskSize < topDisk;
        }

        function resetHanoi() {
            hanoi.pegs = { A: [4, 3, 2, 1], B: [], C: [], D: [] };
            hanoi.moves = 0;
            hanoi.selectedDisk = null;
            hanoi.sourcePeg = null;
            hanoiMessage.textContent = 'Click the peg you want to take a disk from.';
            hanoiMessage.style.color = 'var(--color-text)';
            document.getElementById('hanoi-section').classList.remove('hanoi-win');
            
            // Re-enable click handler
            pegsContainer.addEventListener('click', hanoiClickHandler);
            
            // Clear selections
            document.querySelectorAll('.disk.selected').forEach(d => d.classList.remove('selected'));
            document.querySelectorAll('.peg.target-ready').forEach(p => p.classList.remove('target-ready'));
            
            updateHanoiUI();
        }
        
        function hanoiClickHandler(event) {
            if (hanoi.pegs[targetPegId].length === numDisks) return; // Game won, ignore clicks

            const targetPegElement = event.target.closest('.peg');
            if (!targetPegElement) return;

            // FIX: Renamed local variable to prevent shadowing the global 'targetPegId'
            const clickedPegId = targetPegElement.dataset.peg;
            const sourcePeg = hanoi.pegs[clickedPegId];
            const topDiskSize = sourcePeg[sourcePeg.length - 1];
            
            document.querySelectorAll('.peg.target-ready').forEach(p => p.classList.remove('target-ready'));

            if (!hanoi.selectedDisk) {
                // --- Phase 1: Picking up a disk ---
                if (sourcePeg.length > 0) {
                    hanoi.selectedDisk = topDiskSize;
                    hanoi.sourcePeg = clickedPegId;
                    
                    // Visually select the disk (only the top one)
                    const diskElement = hanoi.diskElements[topDiskSize];
                    diskElement.classList.add('selected');
                    
                    hanoiMessage.textContent = `Selected Disk ${hanoi.selectedDisk}. Now click the peg where you want to place it.`;
                    hanoiMessage.style.color = '#1e90ff';
                    
                    // Highlight valid target pegs
                    Object.keys(hanoi.pegs).forEach(pegId => {
                        if (pegId !== hanoi.sourcePeg && isValidMove(hanoi.selectedDisk, pegId)) {
                            pegElements[pegId].classList.add('target-ready');
                        }
                    });

                } else {
                    hanoiMessage.textContent = "‚ùå That peg is empty! Try another peg.";
                    hanoiMessage.style.color = '#e74c3c';
                }
            } else {
                // --- Phase 2: Placing a disk ---
                const diskToMove = hanoi.selectedDisk;

                // Use the renamed variable here
                if (clickedPegId === hanoi.sourcePeg) {
                    // Deselect
                    hanoi.diskElements[diskToMove].classList.remove('selected');
                    hanoi.selectedDisk = null;
                    hanoi.sourcePeg = null;
                    hanoiMessage.textContent = "Disk deselected. Click the peg you want to take a disk from.";
                    hanoiMessage.style.color = 'var(--color-text)';
                    return;
                }
                
                // Use the renamed variable here
                if (isValidMove(diskToMove, clickedPegId)) {
                    // Execute move
                    hanoi.pegs[hanoi.sourcePeg].pop(); // Remove from source
                    hanoi.pegs[clickedPegId].push(diskToMove); // Add to target
                    hanoi.moves++;
                    
                    // Reset selection state
                    hanoi.diskElements[diskToMove].classList.remove('selected');
                    hanoi.selectedDisk = null;
                    hanoi.sourcePeg = null;
                    hanoiMessage.textContent = 'Valid move! Moves: ' + hanoi.moves;
                    hanoiMessage.style.color = '#38761d';
                    
                    updateHanoiUI();
                    
                } else {
                    hanoiMessage.textContent = "‚ùå Invalid move! Disk must be smaller than the disk below it.";
                    hanoiMessage.style.color = '#e74c3c';
                }
            }
        }
        
        function initHanoi() {
            // Create disk elements and store references
            for(let i = 1; i <= numDisks; i++) {
                const disk = document.createElement('div');
                disk.className = 'disk';
                disk.dataset.size = i;
                disk.id = 'disk-' + i;
                hanoi.diskElements[i] = disk;
            }
            
            document.getElementById('resetHanoiBtn').addEventListener('click', resetHanoi);
            pegsContainer.addEventListener('click', hanoiClickHandler);
            document.getElementById('showSolutionBtn').addEventListener('click', openHanoiSolutionModal);

            resetHanoi(); // Initial setup
        }

        function openHanoiSolutionModal() {
            const solutionModal = document.getElementById('hanoiSolutionModal');
            const tableBody = solutionModal.querySelector('tbody');
            tableBody.innerHTML = ''; // Clear previous content

            optimalMoves.forEach((move, index) => {
                const row = tableBody.insertRow();
                row.style.borderBottom = '1px solid #eee';

                // Add alternating row colors for readability
                if (index % 2 === 0) {
                    row.style.backgroundColor = '#f9f9f9';
                }

                row.insertCell().textContent = index + 1; // Step
                row.insertCell().textContent = move.disk; // Disk
                row.insertCell().textContent = move.from; // From
                row.insertCell().textContent = move.to; // To
            });
            
            solutionModal.style.display = 'flex';
        }

        function closeHanoiSolutionModal() {
            document.getElementById('hanoiSolutionModal').style.display = 'none';
        }


        // --- 5. Motivational Quote Shuffler Logic ---
        const dailyQuotes = [
            { quote: "‚ú® To gain something in life, you have to lose something. ‚ú®", author: "Unknown" },
            { quote: "‚ú® Set your goal, work hard, and success will be yours. ‚ú®", author: "Swami Vivekananda" },
            { quote: "‚ú® The greatest glory in living lies not in never falling, but in rising every time you fall. ‚ú®", author: "Nelson Mandela" },
            { quote: "‚ú® Believe in yourself, because you are very special. ‚ú®", author: "Inspirational Saying" },
            { quote: "‚ú® Life is beautiful, just learn how to live it. ‚ú®", author: "Gulzar" },
            { quote: "‚ú® Every day is a new beginning, never give up. ‚ú®", author: "Great Personality" },
            { quote: "‚ú® When you change, the world changes. ‚ú®", author: "Mahatma Gandhi" },
            { quote: "‚ú® Challenges come because we can learn something from them. ‚ú®", author: "Siddhartha" },
            { quote: "‚ú® Where there is effort, there is certainly success. ‚ú®", author: "Source of Inspiration" },
            { quote: "‚ú® Make today better than yesterday. ‚ú®", author: "Motivational Message" },
            { quote: "‚ú® To live a happy life, keep control over your thoughts. ‚ú®", author: "Epictetus" },
            { quote: "‚ú® You may be leaving the place, but the impact you‚Äôve made will stay. ‚ú®", author: "Adarsh" }
        ];
        
        const allQuotesModal = document.getElementById('allQuotesModal');
        const quotesList = document.getElementById('quotesList');

        function displayRandomQuote() {
            const numQuotes = dailyQuotes.length;
            
            const quoteIndex = Math.floor(Math.random() * numQuotes); 
            
            const quoteData = dailyQuotes[quoteIndex];

            document.getElementById('motivationalQuote').textContent = quoteData.quote;
            document.getElementById('quoteAuthor').textContent = `‚Äî ${quoteData.author}`;
        }
        
        function viewAllQuotes() {
            quotesList.innerHTML = ''; 
            dailyQuotes.forEach(quoteData => {
                const li = document.createElement('li');
                li.innerHTML = `${quoteData.quote} <span class="author">‚Äî ${quoteData.author}</span>`;
                quotesList.appendChild(li);
            });
            allQuotesModal.style.display = 'flex';
        }

        function closeAllQuotesModal() {
            allQuotesModal.style.display = 'none';
        }

        document.getElementById('shuffleQuoteBtn').addEventListener('click', displayRandomQuote);
        document.getElementById('viewAllQuotesBtn').addEventListener('click', viewAllQuotes);
        document.getElementById('allQuotesModal').querySelector('.close').addEventListener('click', closeAllQuotesModal);
        
        // --- 6. Initialisation on Window Load ---
        window.onload = function () {
            setupMemoryWall();
            setupDriveVideos(); 
            initHanoi(); // Initialize Tower of Hanoi
            displayRandomQuote(); 
        }

    </script>
</body>

</html>
